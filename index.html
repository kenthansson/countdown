<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Nedräkning NextGen</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    h1 {
      font-size: 4em;
      margin-bottom: 0.5em;
    }

    #countdown {
      font-size: 2em;
      margin-bottom: 1em;
    }

    #workdays,
    #intervals {
      font-size: 1.5em;
      color: #444;
      margin-bottom: 0.5em;
    }

    #countdown span {
      display: inline-block;
      min-width: 60px;
    }

    #toggleListBtn {
      margin: 1.5em 0 0.5em;
      font-size: 1em;
      background: none;
      border: none;
      color: #0077cc;
      cursor: pointer;
      text-decoration: underline;
    }

    #lista {
      display: none;
      text-align: left;
      max-width: 700px;
      padding: 0 1em;
    }

    #lista h3 {
      margin-top: 0;
      font-size: 1.2em;
    }

    #lista ul {
      list-style-type: disc;
      margin: 0;
      padding-left: 1.2em;
      font-size: 1em;
      line-height: 1.6;
    }

    #lista ul li {
      margin-bottom: 0.5em;
    }
  </style>
</head>
<body>
  <h1>NextGen - 2027-12-31</h1>  
  <div id="countdown">
    Total tid kvar: 
    <span id="days">--</span> dagar
    <span id="hours">--</span> timmar
    <span id="minutes">--</span> minuter
    <span id="seconds">--</span> sekunder
  </div>
  <div id="workdays">Arbetsdagar kvar: --</div>
  <div id="intervals">SAFe-intervaller kvar: --</div>

  <button id="toggleListBtn" onclick="toggleList()">+ Visa vad andra åstadkommit på X dagar</button>

  <div id="lista">
    <h3>Vad andra åstadkommit på X dagar (enligt ChatGPT)</h3>
    <ul>
      <li>1000 dagar: Apple – från första idé till lansering av iPhone 1</li>
      <li>1000 dagar: Amazon.com – från start till första stabila leverans- och lagersystem</li>
      <li>900 dagar: Facebook – från grundande till global expansion och &gt;100 miljoner användare</li>
      <li>900 dagar: Windows 95 – utvecklingscykeln från start till release</li>
      <li>800 dagar: Tesla Model S – från konceptbil till första kundleverans</li>
      <li>800 dagar: GitHub – från första commit till plattform med över 100k publika repo</li>
      <li>700 dagar: Instagram – från prototyp till miljardförvärv av Facebook</li>
      <li>700 dagar: Slack – pivot från spel till fullständig chattplattform</li>
      <li>600 dagar: Microsoft Teams – från projektstart till global lansering</li>
      <li>600 dagar: Spotify Web Player – första versionen utvecklad och lanserad</li>
      <li>500 dagar: Google Chrome – från första interna build till publik release</li>
      <li>500 dagar: WhatsApp – från MVP till 10 miljoner användare</li>
      <li>400 dagar: Klarna Checkout – från idé till lansering i Norden</li>
      <li>400 dagar: Dropbox – från pitchvideo till lansering och 1 miljon användare</li>
      <li>300 dagar: ChatGPT (GPT-3) – från träningsstart till labs-version live</li>
      <li>300 dagar: TikTok (internationellt) – från omprofilering av Musical.ly till global spridning</li>
      <li>200 dagar: LinkedIn – från kodstart till första release (2003)</li>
      <li>200 dagar: Airbnb – från idé till första fungerande bokningar i San Francisco</li>
      <li>100 dagar: Apple skapade den första M1-chip-prototypen</li>
    </ul>
  </div>

  <script>
    const targetDate = new Date("2027-12-31T23:59:00");

    function updateCountdown() {
      const now = new Date();
      const distance = targetDate - now;

      if (distance <= 0) {
        document.getElementById("countdown").textContent = "Tiden har gått ut!";
        document.getElementById("workdays").textContent = "";
        clearInterval(interval);
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      document.getElementById("days").textContent = days;
      document.getElementById("hours").textContent = ("0" + hours).slice(-2);
      document.getElementById("minutes").textContent = ("0" + minutes).slice(-2);
      document.getElementById("seconds").textContent = ("0" + seconds).slice(-2);

      document.getElementById("workdays").textContent = "Arbetsdagar kvar: " + calculateWorkdays(now, targetDate);

      const intervalLength = 70; 
      const intervalsLeft = (days / intervalLength).toFixed(2);
      document.getElementById("intervals").textContent = "SAFe-intervaller kvar: " + intervalsLeft;
    }

    function calculateWorkdays(startDate, endDate) {
      let count = 0;
      const date = new Date(startDate);
      const holidays = getSwedishHolidays(startDate.getFullYear(), endDate.getFullYear());

      while (date <= endDate) {
        const day = date.getDay();
        const dateStr = date.toISOString().split("T")[0];
        if (day >= 1 && day <= 5 && !holidays.has(dateStr)) {
          count++;
        }
        date.setDate(date.getDate() + 1);
      }

      const years = endDate.getFullYear() - startDate.getFullYear() + 1;
      const estimatedVacation = years * 40;
      return Math.max(0, count - estimatedVacation);
    }

    function getSwedishHolidays(startYear, endYear) {
      const holidays = new Set();

      for (let year = startYear; year <= endYear; year++) {
        ["01-01", "01-06", "05-01", "06-06", "12-24", "12-25", "12-26", "12-31"]
          .forEach(d => holidays.add(`${year}-${d}`));

        const easter = getEasterDate(year);
        const goodFriday = new Date(easter); goodFriday.setDate(easter.getDate() - 2);
        const easterMonday = new Date(easter); easterMonday.setDate(easter.getDate() + 1);
        const ascension = new Date(easter); ascension.setDate(easter.getDate() + 39);
        const pentecost = new Date(easter); pentecost.setDate(easter.getDate() + 49);
        const midsummer = getMidsummerEve(year);

        [goodFriday, easter, easterMonday, ascension, pentecost, midsummer]
          .forEach(d => holidays.add(d.toISOString().split("T")[0]));
      }

      return holidays;
    }

    function getEasterDate(year) {
      const f = Math.floor;
      const G = year % 19;
      const C = f(year / 100);
      const H = (C - f(C / 4) - f((8 * C + 13) / 25) + 19 * G + 15) % 30;
      const I = H - f(H / 28) * (1 - f(29 / (H + 1)) * f((21 - G) / 11));
      const J = (year + f(year / 4) + I + 2 - C + f(C / 4)) % 7;
      const L = I - J;
      const month = 3 + f((L + 40) / 44);
      const day = L + 28 - 31 * f(month / 4);
      return new Date(year, month - 1, day);
    }

    function getMidsummerEve(year) {
      for (let d = 19; d <= 25; d++) {
        const date = new Date(year, 5, d);
        if (date.getDay() === 5) return date;
      }
    }

    function toggleList() {
      const lista = document.getElementById("lista");
      const btn = document.getElementById("toggleListBtn");
      const isVisible = lista.style.display === "block";
      lista.style.display = isVisible ? "none" : "block";
      btn.textContent = isVisible 
        ? "+ Visa vad andra åstadkommit på X dagar" 
        : "− Dölj listan";
    }

    const interval = setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>
</body>
</html>
